{% extends 'index.html' %}
{% load static %}
{% block title %}注册{% endblock %}
{% block extra_css %}
    <link href="{% static 'css/jedate.css' %}" rel="stylesheet" type="text/css">
{% endblock %}
{% block middle %}
                <form action="{% url 'register' %}" method ="post">
                    {% csrf_token %}
                    <fieldset>
{#                        <div class="form-row">#}
{#                            <div class="col col-6">#}
{#                                <div class="field-group prepend-icon">#}
{#                                    <label class="mdn-label">First Name</label>#}
{#                                    <span class="mdn-icon"><i class="fa fa-male"></i></span>#}
{#                                    <span class="mdn-bar"></span>#}
{#                                    <input type="text" class="mdn-input" placeholder="Enter firstname">#}
{#                                </div>#}
{#                            </div><!-- end col-6 -->#}
{#                            <div class="col col-6">#}
{#                                <div class="field-group prepend-icon">#}
{#                                    <label class="mdn-label">Last Name</label>#}
{#                                    <span class="mdn-icon"><i class="fa fa-male"></i></span>#}
{#                                    <span class="mdn-bar"></span>#}
{#                                    <input type="text" class="mdn-input" placeholder="Enter lastname">#}
{#                                </div>#}
{#                            </div><!-- end col-6 -->#}
{#                        </div><!-- end form-row -->#}

                        <div class="field-group prepend-icon">
                            <label class="mdn-label">昵称</label>
                            <span class="mdn-icon"><i class="fa fa-user"></i></span>
                            <span class="mdn-bar"></span>
                            <input type="text" class="mdn-input" placeholder="Enter nick name" name="nick_name">
                        </div>

                        <div class="field-group prepend-icon">
                            <label class="mdn-label">用户名</label>
                            <span class="mdn-icon"><i class="fa fa-user"></i></span>
                            <span class="mdn-bar"></span>
                            <input type="text" class="mdn-input" placeholder="Enter username" name="username">
                        </div>

                        <div class="field-group prepend-icon">
                            <label class="mdn-label">密码</label>
                            <span class="mdn-icon"><i class="fa fa-lock"></i></span>
                            <span class="mdn-bar"></span>
                            <input class="mdn-input" type="password" placeholder="Enter your password" name="password">
                        </div>

                        <div class="field-group prepend-icon">
                            <label class="mdn-label">确认密码</label>
                            <span class="mdn-icon"><i class="fa fa-lock"></i></span>
                            <span class="mdn-bar"></span>
                            <input class="mdn-input" type="password" placeholder="Re-enter password" name="ck_password">
                        </div>

                        <div class="field-group prepend-icon">
                            <label class="mdn-label">生日</label>
                            <span class="mdn-icon"><i class="fa fa-user"></i></span>
                            <span class="mdn-bar"></span>
                            <input type="text" class="mdn-input" id="startTime" name="birthday" placeholder="Enter your birthday" value="" readonly="">
                        </div>
                    </fieldset>
                    <fieldset>
                        <div class="field-group mdn-select">
                            <label class="mdn-label">性别 </label>
                            <span class="mdn-icon"><i class="fa fa-user"></i></span>
                            <span class="mdn-bar"></span>
                            <select name="gender">
                                <option value="male">男</option>
                                <option value="female">女</option>
                            </select>
                        </div>
{#                        <div class="field-group">#}
{#                            <label class="mdn-label">手机</label>#}
{#                            <span class="mdn-bar"></span>#}
{#                            <input type="text" class="mdn-input" name="mobile" placeholder="手机号">#}
{#                        </div>#}
                        <div class="field-group">
                            <label class="mdn-label">email</label>
                            <span class="mdn-bar"></span>
                            <input type="text" class="mdn-input" name="email" placeholder="Enter current email address">
                        </div>
                    </fieldset>
                    <fieldset>
                        <div class="mdn-label-pos block-label"><label class="mdn-label"></label></div>
                        <div class="mdn-group block-group mdn-bottom-border">
{#                            <label class="mdn-switch">#}
{#                                <span class="switch-toggle"></span>#}
{#                                <span class="switch-label">I agree to the terms of service</span>#}
{#                                <input type="checkbox" name="terms" checked>#}
{#                            </label>#}
                        </div><!-- mdn-group -->
                    </fieldset>
                    <div class="mdn-footer">
                        <button type="submit" class="mdn-button btn-primary">提交</button>
                        <button type="reset" class="mdn-button btn-flat">重置</button>
                    </div>
                </form>

{% endblock %}
{% block extra_js_files %}
    <script src="{% static 'js/jedate.min.js' %}"></script>
{% endblock %}
{% block js %}
    <script>
        $(document).ready(function () {
            jeDate('#startTime', {
                minDate: '1910-01-01',
                isinitVal: true,
                format: 'YYYY-MM-DD',
                onClose: false,
                donefun:function(obj){
                    // console.log(obj)
                    var saliDate=obj.val.split("-");
                    // console.log(saliDate)
                    var riNum=0;
                    var yueNum=0;
                    var nianNum=saliDate[0];
                    // console.log(saliDate[1]-1)
                    // //判断月 同时判断年
                    if(saliDate[1]-1<=0&&saliDate[2]=="01"){
                        yueNum=12;
                        riNum=31;
                        nianNum=nianNum;
                        // console.log(nianNum,yueNum,riNum)

                        return false;
                    }else {
                        yueNum=saliDate[1];
                        nianNum=nianNum-0+1;
                    }
                    //当 日 是01 的时候要判断当前下一个月是否为31 还是30天  在判断一个是否为闰年  2月份是29 还是28
                    if(saliDate[2]=="01"){
                        switch(saliDate[1]-1){
                            case 1:
                            case 3:
                            case 5:
                            case 7:
                            case 8:
                            case 10:
                            case 0://0就是12月  因为是只有点击的是2019-01-01  才会是2018-12-31
                                riNum=31;
                                yueNum="0"+(saliDate[1]-1);
                                break;
                            case 4:
                            case 6:
                            case 9:
                            case 11:
                                riNum=30;
                                yueNum="0"+(saliDate[1]-1);
                                break;
                        }
                        if(saliDate[1]-1==2){
                        	yueNum="0"+(saliDate[1]-1);
                            //判断是否为闰年
                            if(isLeap(saliDate[0])==1){
                                riNum=29;
                            }else{
                                riNum=28;
                            }
                        }
                    }else{
                        if(saliDate[2]-1<=9){
                            riNum="0"+(saliDate[2]-1);
                        }else{
                            riNum=saliDate[2]-1;
                        }
                    }

                    // console.log(nianNum,yueNum,riNum)
                }
            });

           //判断是否为闰年  若为闰年，返回1，反之则返回0
            function isLeap(year) {
                if((year%4==0 && year%100!=0)||(year%400==0)){
                    return 1;
                }
                return 0;
            }
       })
    </script>
{% endblock %}